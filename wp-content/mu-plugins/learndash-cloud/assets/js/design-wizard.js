/** This file is part of the LearnDash Cloud MU plugin and was generated automatically */
(()=>{function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function t(t){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?e(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new URLSearchParams(window.location.search),a=t.get("template"),l=t.get("nonce"),n=0,d=0;e?(n=1,m(),d=6,a.includes("astra")?d=parseInt(d)+35:a.includes("kadence")&&(d=parseInt(d)+9),Cookies.set("ldCloudDwTotalSteps",d)):(n=Cookies.get("ldCloudDwCurrentStepN"),n=parseInt(n)+1,d=Cookies.get("ldCloudDwTotalSteps")),Cookies.set("ldCloudDwCurrentStepN",n),jQuery.post(LearnDashCloudDesignWizard.ajaxurl,{action:"LdCloudDwBuildTemplate",nonce:l,template:a,init:e},(function(e){if(e.success){if(e.data.complete){n=1,d=1,m(!0);var t=LearnDashCloudDesignWizard.templates.actions_success;jQuery(".design-wizard > .content > .text").replaceWith(t)}else"build_template"!==e.data.step?s():"build_template"===e.data.step&&("astra"===e.data.theme?o():"kadence"===e.data.theme&&r());i({currentStepN:n,totalSteps:d,message:e.data.message})}}))}function o(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",u=new URLSearchParams(window.location.search),c=Cookies.get("ldCloudDwFont"),m=Cookies.get("ldCloudDwPalette"),C=JSON.stringify(l("astra",c)),h=Cookies.get("astra-site-color-scheme"),f=u.get("step");h&&(e=JSON.stringify(n("astra",m,h))),a.length<1&&(a=LearnDashCloudDesignWizard.ajaxurl);var w,g=["astra-sites-api-request","astra-required-plugins","astra-sites-filesystem-permission","astra-sites-set-start-flag","astra-sites-reset-customizer-data","astra-sites-reset-site-options","astra-sites-reset-widgets-data","astra-sites-reset-terms-and-forms","astra-sites-get-deleted-post-ids","astra-sites-reset-posts","astra-sites-import-wpforms","astra-sites-import-cartflows","astra-sites-import-customizer-settings","astra-sites-import-prepare-xml","astra-wxr-import","astra-sites-import-options","astra-sites-import-widgets","astra_sites_set_site_data-site_colors","astra_sites_set_site_data-site_typography","astra-sites-import-end"],k=Cookies.get("ldCloudDwThemeTemplateId"),v=Cookies.get("ldCloudDwLastBuildAstraStep"),D=Cookies.get("ldCloudDwTotalSteps"),_=Cookies.get("ldCloudDwCurrentStepN"),y="";_=parseInt(_)+1,Cookies.set("ldCloudDwCurrentStepN",_),w=v?g.indexOf(v)+1:0;var j=g[w];if(j){var S,b,L;switch(f=j,j){case"astra-sites-api-request":r.url="astra-sites/"+k,y="Get template data";break;case"astra-sites-reset-customizer-data":y="Reset site data";break;case"astra-sites-reset-posts":b="undefined"!==(S=Cookies.get("astra-site-deleted-post-ids"))?(S=S.split(",")).splice(0,10):[],r.ids=Object.assign({},b),r.ids=JSON.stringify(r.ids),L="undefined"!==S&&S.length>0;break;case"astra-sites-import-wpforms":r.wpforms_url=Cookies.get("astra-site-wpforms-path"),Cookies.remove("astra-site-wpforms-path"),y="Import wpforms data if any";break;case"astra-sites-import-cartflows":r.cartflows_url=Cookies.get("astra-site-cartflows-path"),Cookies.remove("astra-site-cartflows-path"),y="Import cartflows data if any";break;case"astra-sites-import-widgets":r.widgets_data=Cookies.get("astra-site-widgets-data"),Cookies.remove("astra-site-widgets-data"),y="Import widgets data";break;case"astra-sites-import-prepare-xml":r.wxr_url=Cookies.get("astra-site-wxr-path"),Cookies.remove("astra-site-wxr-path"),y="Import XML data";break;case"astra_sites_set_site_data-site_colors":f="astra_sites_set_site_data",r.param="site-colors",r.palette=e,r.security=LearnDashCloudDesignWizard.ajax_set_data_nonce,Cookies.remove("astra-site-color-scheme"),y="Apply site color options";break;case"astra_sites_set_site_data-site_typography":f="astra_sites_set_site_data",r.param="site-typography",r.typography=C,r.security=LearnDashCloudDesignWizard.ajax_set_data_nonce,y="Apply site typography options"}i({currentStepN:_,totalSteps:D,message:y}),jQuery.ajax({url:a,type:d,data:t({action:f,_ajax_nonce:LearnDashCloudDesignWizard.ajax_nonce},r),success:function(e){if("astra-wxr-import"===j)e.length>0&&o();else if("astra-wxr-import"!==j)if(e.success){var t,a="",r="POST";switch(j){case"astra-sites-api-request":Cookies.set("astra-site-wpforms-path",e.data["astra-site-wpforms-path"]),Cookies.set("astra-site-cartflows-path",e.data["astra-site-cartflows-path"]),Cookies.set("astra-site-wxr-path",e.data["astra-site-wxr-path"]),Cookies.set("astra-site-widgets-data",e.data["astra-site-widgets-data"]);break;case"astra-required-plugins":Cookies.set("astra-site-required-plugins",e.data.required_plugins),e.data.required_plugins.notinstalled.forEach((function(e){wp.updates.queue.push({action:"install-plugin",data:{slug:e.slug,init:e.init,name:e.name,clear_destination:!0,success:function(){p(e)},error:function(){}}})})),wp.updates.queueChecker(),e.data.required_plugins.inactive.forEach((function(e){p(e)}));break;case"astra-sites-get-deleted-post-ids":t=e.data.splice(0,100),Cookies.set("astra-site-deleted-post-ids",t);break;case"astra-sites-import-prepare-xml":a=e.data.url,r="GET";break;case"astra-sites-import-end":return Cookies.remove("ldCloudDwLastBuildAstraStep"),void s()}o(a,{},r)}else{y=Object.hasOwnProperty.call(e,"data")&&Object.hasOwnProperty.call(e.data,"message")?e.data.message:LearnDashCloudDesignWizard.messages.dw_error_default,y=LearnDashCloudDesignWizard.messages.dw_error_prefix+": "+y,i({currentStepN:_-1,totalSteps:D,message:y});var l=LearnDashCloudDesignWizard.templates.actions_error;jQuery(".design-wizard > .content > .text").replaceWith(l),Cookies.remove("ldCloudDwLastBuildAstraStep")}_=parseInt(_)+1,Cookies.set("ldCloudDwCurrentStepN",_)}}).fail((function(){Cookies.remove("ldCloudDwLastBuildAstraStep"),Cookies.remove("ldCloudDwCurrentStepN")})),L?Cookies.set("ldCloudDwLastBuildAstraStep","astra-sites-reset-terms-and-forms"):Cookies.set("ldCloudDwLastBuildAstraStep",j)}else Cookies.remove("ldCloudDwLastBuildAstraStep")}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",l=new URLSearchParams(window.location.search),n=l.get("step");e.length<1&&(e=LearnDashCloudDesignWizard.ajaxurl);var d,u=["kadence_import_get_template_data","kadence_check_plugin_data","kadence_remove_past_import_data","kadence_import_install_plugins","kadence_import_demo_data","kadence_import_customizer_data","kadence_after_import_data"],c=Cookies.get("ldCloudDwThemeTemplateId"),p=Cookies.get("ldCloudDwLastBuildKadenceStep"),m=Cookies.get("ldCloudDwTotalSteps"),C=Cookies.get("ldCloudDwCurrentStepN"),h="";C=parseInt(C)+1,Cookies.set("ldCloudDwCurrentStepN",C),d=p?u.indexOf(p)+1:0;var f=u[d];if(f){switch(n=f,a.selected=c,a.builder="blocks",f){case"kadence_import_get_template_data":a.template_type="blocks",h="Get template data";break;case"check_plugin_data":a.selected="",a.builder="blocks",h="Check plugin data";break;case"kadence_import_demo_data":a.palette=Cookies.get("ldCloudDwPalette"),a.font=Cookies.get("ldCloudDwFont"),h="Import demo data";break;case"kadence_import_customizer_data":a.wp_customize="on",delete a.selected,delete a.builder,h="Import customizer data"}i({currentStepN:C,totalSteps:m,message:h}),f&&Cookies.set("ldCloudDwLastBuildKadenceStep",f),jQuery.ajax({url:e,type:o,data:t({action:n,security:LearnDashCloudDesignWizard.ajax_kadence_security_nonce},a),success:function(e){var t;switch(f){case"kadence_import_get_template_data":t=JSON.parse(e),Cookies.set("ldCloudDwKadenceTemplateData",t);break;case"kadence_import_demo_data":"newAJAX"===e.status&&Cookies.set("ldCloudDwLastBuildKadenceStep","kadence_import_install_plugins");break;case"kadence_after_import_data":return Cookies.remove("ldCloudDwLastBuildKadenceStep"),Cookies.remove("ldCloudDwPalette"),Cookies.remove("ldCloudDwFont"),void s()}r("",{},"POST")}}).fail((function(){Cookies.remove("ldCloudDwLastBuildKadenceStep"),Cookies.remove("ldCloudDwPalette"),Cookies.remove("ldCloudDwFont")}))}else Cookies.remove("ldCloudDwLastBuildKadenceStep"),Cookies.remove("ldCloudDwPalette"),Cookies.remove("ldCloudDwFont")}function i(e){var t=e.currentStepN/e.totalSteps*100;t=(t=t>100?100:t).toFixed(0),jQuery(".progress .percentage .number").text(t+"%"),jQuery(".progress .bar progress").attr("value",t),""!==e.message&&jQuery(".progress .status .message").html(e.message)}function l(e,t){var a={};return Object.prototype.hasOwnProperty.call(LearnDashCloudDesignWizard.fonts[e][t],"details")&&(a=LearnDashCloudDesignWizard.fonts[e][t].details),a}function n(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return a.length>0?LearnDashCloudDesignWizard.palettes[e][a][t]:LearnDashCloudDesignWizard.palettes[e][t]}function d(e,t,a,s){var o={step:t+1,template:a,nonce:s};s||delete o.nonce;var r=new URLSearchParams(o),i=encodeURI(e+"&"+r.toString());window.location.href=i}function u(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=document.getElementById("ld-site-preview");if(s){var o,r,i,d,u={};switch(t){case"site-colors":"astra"===e?(o="colorPalette",r=n("astra",a,Cookies.get("astra-site-color-scheme")||"light")):"kadence"===e&&(i="color",d="default"!==a?Cookies.get("ldCloudDwPalette"):"");break;case"site-typography":"astra"===e?(o="siteTypography",r=c(a,r=l("astra",a))):"kadence"===e&&(i="font",d="default"!==a?Cookies.get("ldCloudDwFont"):"")}"astra"===e?o&&r&&s.contentWindow.postMessage({call:"starterTemplatePreviewDispatch",value:{param:o,data:r}},"*"):"kadence"===e&&(u[i]=d,s.contentWindow.postMessage(u,"*"))}}function c(e,t){var a=e;return t.id=a,t["font-family-h1"]="inherit",t["font-family-h2"]="inherit",t["font-family-h3"]="inherit",t["font-family-h4"]="inherit",t["font-family-h5"]="inherit",t["font-family-h6"]="inherit",t["font-weight-h1"]="inherit",t["font-weight-h2"]="inherit",t["font-weight-h3"]="inherit",t["font-weight-h4"]="inherit",t["font-weight-h5"]="inherit",t["font-weight-h6"]="inherit",t["line-height-h1"]="",t["line-height-h2"]="",t["line-height-h3"]="",t["line-height-h4"]="",t["line-height-h5"]="",t["line-height-h6"]="",t["text-transform-h1"]="",t["text-transform-h2"]="",t["text-transform-h3"]="",t["text-transform-h4"]="",t["text-transform-h5"]="",t["text-transform-h6"]="",t}function p(e){jQuery.post(LearnDashCloudDesignWizard.ajaxurl,{action:"astra-required-plugin-activate",_ajax_nonce:LearnDashCloudDesignWizard.ajax_nonce,init:e.init},(function(){}))}function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Cookies.remove("ldCloudDwCurrentStepN"),Cookies.remove("ldCloudDwTotalSteps"),Cookies.remove("ldCloudDwLastBuildAstraStep"),Cookies.remove("ldCloudDwLastBuildKadenceStep"),Cookies.remove("astra-site-wpforms-path"),Cookies.remove("astra-site-cartflows-path"),Cookies.remove("astra-site-wxr-path"),Cookies.remove("astra-site-widgets-data"),Cookies.remove("astra-site-required-plugins"),e&&(Cookies.remove("astra-site-color-scheme"),Cookies.remove("ldCloudDwTemplateId"),Cookies.remove("ldCloudDwThemeTemplateId"),Cookies.remove("ldCloudDwFont"),Cookies.remove("ldCloudDwPalette"))}jQuery(window).on("load",(function(){!function(){var e=new URLSearchParams(window.location.search),t=e.get("template"),a=e.get("nonce"),o=e.get("step"),r="";o=o?parseInt(o):1,t&&(r=t.includes("kadence_")?"kadence":"astra");if(1===o)Cookies.remove("ldCloudDwTemplateId");else if(2===o||3===o||4===o){var i=Cookies.get("ldCloudDwFont"),l=Cookies.get("ldCloudDwPalette");setTimeout((function(){u(r,"site-colors",l),u(r,"site-typography",i),setTimeout((function(){jQuery("#ld-site-preview").show()}),1e3)}),500)}else 5===o&&t.length>0&&a.length>0&&(Cookies.remove("ldCloudDwLastBuildAstraStep"),Cookies.remove("ldCloudDwLastBuildKadenceStep"),s(!0))}()})),jQuery((function(){jQuery(document).on("mouseover",".templates .template figure",(function(e){e.preventDefault(),jQuery(this).addClass("hover")})),jQuery(document).on("mouseleave",".templates .template figure",(function(e){e.preventDefault(),jQuery(this).removeClass("hover")})),jQuery(document).on("click",".templates .template figure .actions .select",(function(e){e.preventDefault();var t=jQuery(this).closest(".templates"),a=jQuery(this).closest(".template").data("id"),s=jQuery(this).closest(".template").data("theme_template_id");t.find(".template").removeClass("selected"),jQuery(this).closest(".template").addClass("selected"),Cookies.set("ldCloudDwTemplateId",a),Cookies.set("ldCloudDwThemeTemplateId",s),Cookies.set("ldCloudDwPalette","default"),Cookies.set("ldCloudDwFont","default")})),jQuery(document).on("click",".templates .template figure .actions .preview",(function(e){e.preventDefault();var t=jQuery(".preview-wrapper"),a=t.find(".iframe-wrapper"),s=jQuery(this).closest(".template"),o=s.data("id").includes("kadence_")?"kadence":"astra",r=s.data("preview_url");r&&r.length>0&&(t.find("iframe").attr("src",r),t.show(),a.hide(),setTimeout((function(){u(o,"site-colors","default"),u(o,"site-typography","default"),a.show()}),500))})),jQuery(document).on("click",".preview-wrapper .close",(function(e){e.preventDefault();var t=jQuery(this).closest(".preview-wrapper");t.find(".preview iframe").removeAttr("src"),t.hide()})),jQuery(document).on("click",".design-wizard .fonts .font",(function(e){e.preventDefault();var t=jQuery(this).closest(".fonts"),a=jQuery(this).data("id"),s=Cookies.get("ldCloudDwTemplateId").includes("kadence_")?"kadence":"astra";t.find(".font").removeClass("selected"),jQuery(this).addClass("selected"),Cookies.set("ldCloudDwFont",a),u(s,"site-typography",a)})),jQuery(document).on("click",".design-wizard .reset-font-button",(function(e){e.preventDefault();var t=jQuery(this).closest(".header").find(".fonts"),a=Cookies.get("ldCloudDwTemplateId").includes("kadence_")?"kadence":"astra";t.find(".font").removeClass("selected"),Cookies.remove("ldCloudDwFont"),u(a,"site-typography","default")})),jQuery(document).on("click",".design-wizard .palettes .palette",(function(e){e.preventDefault();var t=jQuery(this).closest(".palettes"),a=jQuery(this).data("id"),s=Cookies.get("ldCloudDwTemplateId").includes("kadence_")?"kadence":"astra";t.find(".palette").removeClass("selected"),jQuery(this).addClass("selected"),Cookies.set("ldCloudDwPalette",a),u(s,"site-colors",a)})),jQuery(document).on("click",".design-wizard .reset-palette-button",(function(e){e.preventDefault();var t=jQuery(this).closest(".header").find(".palettes"),a=Cookies.get("ldCloudDwTemplateId").includes("kadence_")?"kadence":"astra";t.find(".palette").removeClass("selected"),Cookies.remove("ldCloudDwPalette"),u(a,"site-colors","default")})),jQuery(document).on("click",".next-button",(function(e){e.preventDefault();var t=window.location.href,a=new URLSearchParams(window.location.search),s=Cookies.get("ldCloudDwTemplateId"),o=!1;if(!s||"undefined"===s)return alert("Please select a template first"),!1;var r=a.get("step");1===(r=r?parseInt(r):1)?(s.includes("astra_")&&Cookies.set("astra-site-color-scheme","light"),d(t,r,s,o)):d(t,r,s,4===r?o=LearnDashCloudDesignWizard.ajax_init_nonce:o)})),jQuery(document).on("click",".back",(function(e){e.preventDefault(),history.back()})),jQuery(document).on("click",".exit",(function(e){e.preventDefault(),window.location.href=LearnDashCloudDesignWizard.learndash_cloud_setup_url})),jQuery(document).on("click",".visit-site",(function(e){e.preventDefault(),jQuery('<a href="'+LearnDashCloudDesignWizard.site_url+'" target="_blank"Visit Site</a>')[0].click()}))}))})();