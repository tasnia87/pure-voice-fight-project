{"version":3,"sources":["admin.tincan.report.tab.min.min.js"],"names":["jQuery","document","ready","$","ResetModules","children","each","i","this","remove","insertParam","key","value","console","log","encodeURI","x","kvp","location","search","substr","split","length","join","change","find","val","click","e","fields","index","value_top","tc_filter_date_range","data","action","tc_filter_course","post","ajaxurl","response","append","$indicator","css","addClass"],"mappings":"AAMAA,OAAQC,UAAWC,MAAO,SAASC,GAmElC,QAASC,KACRD,EAAG,uDAAwDE,WAAWC,KAAM,SAAUC,GAC1E,IAANA,GAAUJ,EAAEK,MAAMC,WAIzB,QAASC,GAAYC,EAAKC,GAEzBC,QAAQC,IAAI,mBACZD,QAAQC,KAAKH,EAAKC,IACfD,EAAMI,UAAUJ,GAAMC,EAAQG,UAAUH,EAIf,KAFzB,GAEsBI,GAFlBC,EAAMhB,SAASiB,SAASC,OAAOC,OAAO,GAAGC,MAAM,KAE/Cd,EAAEU,EAAIK,OAAqBf,KAI3B,GAFAS,EAAIC,EAAIV,GAAGc,MAAM,KAEbL,EAAE,IAAIL,EACV,CACIK,EAAE,GAAKJ,EACPK,EAAIV,GAAKS,EAAEO,KAAK,IAChB,OAILhB,EAAE,IAAIU,EAAIA,EAAIK,SAAWX,EAAIC,GAAOW,KAAK,MAG5CtB,SAASiB,SAASC,OAASF,EAAIM,KAAK,KA9FxCpB,EAAG,mCAAoCqB,OAAQ,WAC9CX,QAAQC,IAAI,0BACZ,IAAIF,GAAQT,EAAEK,MAAMiB,KAAM,mBAAoBC,KAE9ChB,GAAa,WAAYE,KAI1BT,EAAG,kDAAmDwB,MAAO,WAC5DxB,EAAG,wEAAyEwB,UAG7ExB,EAAG,sGAAuGwB,MAAO,WAChHxB,EAAG,wEAAyEwB,UAK7ExB,EAAG,qBAAsBwB,MAAO,SAAUC,GACzC,GAAIC,IAAW,kBAAmB,iBAAkB,mBAAoB,mBAAoB,mBAAoB,mBAAoB,uBAAwB,4BAA6B,kBAAmB,gBAE5M1B,GAAEG,KAAMuB,EAAQ,SAAUC,EAAOlB,GAChC,GAAImB,GAAY5B,EAAG,8BAAgCS,EAAQ,MAAOc,KAElEvB,GAAG,iCAAmCS,EAAQ,MAAOc,IAAKK,IAG3D,IAAIC,GAAuB7B,EAAG,kEAAmEuB,KAE7D,oBAAxBM,GACX7B,EAAG,6DAA8DuB,IAAKM,GAEtE7B,EAAG,6DAA8DuB,IAAK,MAKxEvB,EAAG,uDAAwDqB,OAAQ,WAClE,IAAMrB,EAAEK,MAAMkB,MAEb,WADAtB,IAID,IAAI6B,IACHC,OAAU,cACVC,iBAAqBhC,EAAGK,MAAOkB,MAGhCvB,GAAEiC,KAAMC,QAASJ,EAAM,SAAUK,GAGhClC,IACAD,EAAG,uDAAwDoC,OAAQD,OAKrEnC,EAAG,uEAAwEG,KAAM,WAChF,GAAIkC,GAAarC,EAAEK,MAAMiB,KAAM,qBAEQ,WAAlCe,EAAWC,IAAK,eACpBD,EAAWE,SAAU","file":"admin.tincan.report.tab.min.min.js","sourcesContent":["/**\r\n * @package Uncanny TinCan API\r\n * @author Uncanny Owl\r\n * @version 1.0.0\r\n */\r\n\r\njQuery( document ).ready( function($) {\r\n\t// Per Page\r\n\t$( '#tincan-filters-per_page select' ).change( function() {\r\n\t\tconsole.log('changed per page select');\r\n\t\tvar value = $(this).find( 'option:selected' ).val();\r\n\r\n\t\tinsertParam( 'per_page', value );\r\n\t});\r\n\r\n\t// <!-- Change Date Range Type\r\n\t$( '#tincan-filters-top #tc_filter_date_range_last' ).click( function() {\r\n\t\t$( '#tincan-filters-top input[name=\"tc_filter_date_range\"][value=\"last\"]' ).click();\r\n\t});\r\n\r\n\t$( '#tincan-filters-top input[name=\"tc_filter_start\"], #tincan-filters-top input[name=\"tc_filter_end\"]' ).click( function() {\r\n\t\t$( '#tincan-filters-top input[name=\"tc_filter_date_range\"][value=\"from\"]' ).click();\r\n\t});\r\n\t// Change Date Range Type -->\r\n\r\n\t// CSV Export\r\n\t$( '#do_tc_export_csv' ).click( function( e ) {\r\n\t\tvar fields = [ 'tc_filter_group', 'tc_filter_user', 'tc_filter_course', 'tc_filter_lesson', 'tc_filter_module', 'tc_filter_action', 'tc_filter_date_range', 'tc_filter_date_range_last', 'tc_filter_start', 'tc_filter_end' ];\r\n\r\n\t\t$.each( fields, function( index, value ) {\r\n\t\t\tvar value_top = $( '#tincan-filters-top [name=\"' + value + '\"]' ).val();\r\n\r\n\t\t\t$( '#tincan-filters-bottom [name=\"' + value + '\"]' ).val( value_top );\r\n\t\t});\r\n\r\n\t\tvar tc_filter_date_range = $( '#tincan-filters-top input[name=\"tc_filter_date_range\"]:checked' ).val();\r\n\r\n\t\tif ( typeof tc_filter_date_range != 'undefined' ) {\r\n\t\t\t$( '#tincan-filters-bottom input[name=\"tc_filter_date_range\"]' ).val( tc_filter_date_range );\r\n\t\t} else {\r\n\t\t\t$( '#tincan-filters-bottom input[name=\"tc_filter_date_range\"]' ).val( '' );\r\n\t\t}\r\n\t});\r\n\r\n\t// Ajax : Modules from Course\r\n\t$( '#tincan-filters-top select[name=\"tc_filter_course\"]' ).change( function() {\r\n\t\tif ( !$(this).val() ) {\r\n\t\t\tResetModules();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\t'action': 'GET_Modules',\r\n\t\t\t'tc_filter_course' : $( this ).val()\r\n\t\t};\r\n\r\n\t\t$.post( ajaxurl, data, function( response ) {\r\n\t\t\t// Do Something\r\n\r\n\t\t\tResetModules();\r\n\t\t\t$( '#tincan-filters-top select[name=\"tc_filter_module\"]' ).append( response );\r\n\t\t});\r\n\t});\r\n\r\n\t// Change Sorting Indicator\r\n\t$( '.uo-admin-reporting-tab-single#tin-can table.wp-list-table thead th' ).each( function() {\r\n\t\tvar $indicator = $(this).find( '.sorting-indicator' );\r\n\r\n\t\tif ( $indicator.css( 'visibility' ) == 'hidden' ) {\r\n\t\t\t$indicator.addClass( 'double-headed-triangles' );\r\n\t\t}\r\n\t});\r\n\r\n\tfunction ResetModules() {\r\n\t\t$( '#tincan-filters-top select[name=\"tc_filter_module\"]' ).children().each( function (i) {\r\n\t\t\tif ( i !== 0 ) $(this).remove();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction insertParam(key, value)\r\n\t{\r\n\t\tconsole.log('inserting param');\r\n\t\tconsole.log([key, value]);\r\n\t    key = encodeURI(key); value = encodeURI(value);\r\n\r\n\t    var kvp = document.location.search.substr(1).split('&');\r\n\r\n\t    var i=kvp.length; var x; while(i--)\r\n\t    {\r\n\t        x = kvp[i].split('=');\r\n\r\n\t        if (x[0]==key)\r\n\t        {\r\n\t            x[1] = value;\r\n\t            kvp[i] = x.join('=');\r\n\t            break;\r\n\t        }\r\n\t    }\r\n\r\n\t    if(i<0) {kvp[kvp.length] = [key,value].join('=');}\r\n\r\n\t    //this will reload the page, it's likely better to store this until finished\r\n\t    document.location.search = kvp.join('&');\r\n\t}\r\n});"]}