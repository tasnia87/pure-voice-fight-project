var tincannyModuleController=function(){var t=this;this.count={},this.completion={},this.bound=!1,this.hasCompletionSetting=!1,this.markCompleteSettings="",this.markCompleteLesson=0,this.markCompleteCourse=0,this.markCompleteLabel="",this.currentLessonLink="",t.iframe_interval=!1;var e=new tincannyModuleFunctions(this);this.ready=function(){this.iFrameReady(),this.lightboxReady(),this.newWindowReady(),this.setButton(!1),e.checkH5PCompletiton()},this.setButton=function(e){if(jQuery("form[id=sfwd-mark-complete]").css("display","block"),jQuery(".sfwd-mark-complete").css("display","block"),jQuery(".tclr-mark-complete-button").css("display","block").addClass("tclr-mark-complete-button--visible"),"remove"===this.markCompleteSettings||"autoadvance"===this.markCompleteSettings)return jQuery("form[id=sfwd-mark-complete]").remove(),void jQuery(".sfwd-mark-complete").remove();var i=!0,o=!1;Object.keys(this.count).forEach(function(e){void 0!==t.count[e]&&(i=!1)}),Object.keys(t.count).forEach(function(e){t.count[e]>0&&Object.keys(t.completion[e]).length>0&&(o=!0)}),i?(jQuery("#sfwd-mark-complete input").prop("disabled",!1),jQuery("#sfwd-mark-complete input").removeClass("disabled"),jQuery(".sfwd-mark-complete input").removeAttr("disabled"),jQuery(".sfwd-mark-complete input").removeClass("disabled"),"hide"==this.markCompleteSettings&&jQuery(".tclr-mark-complete-button").css("display","block").addClass("tclr-mark-complete-button--visible")):o?(jQuery("#sfwd-mark-complete input").prop("disabled",!1),jQuery("#sfwd-mark-complete input").removeClass("disabled"),jQuery(".sfwd-mark-complete input").prop("disabled",!1),jQuery(".sfwd-mark-complete input").removeClass("disabled"),"hide"==this.markCompleteSettings&&jQuery(".tclr-mark-complete-button").css("display","block").addClass("tclr-mark-complete-button--visible"),tinCanny.doAction("after_tincanny_insert_list")):(jQuery("#sfwd-mark-complete input").prop("disabled",!0),jQuery("#sfwd-mark-complete input").addClass("disabled"),jQuery(".sfwd-mark-complete input").prop("disabled",!0),jQuery(".sfwd-mark-complete input").addClass("disabled"),"hide"==this.markCompleteSettings&&jQuery(".tclr-mark-complete-button").css("display","none").removeClass("tclr-mark-complete-button--visible"))},this.iFrameReady=function(){jQuery(".AnC-iFrame").bind("ready load",function(){e.checkStatues(jQuery(this)[0].contentWindow,"iFrame")})},this.lightboxReady=function(){jQuery("body").bind("DOMSubtreeModified",function(){jQuery(".nivo-lightbox-item").bind("load",function(){var i=jQuery(this)[0].src;jQuery(this).attr("data-tcloaded")||(e.checkStatues(jQuery(this)[0].contentWindow,"lightbox"),jQuery(this).attr("data-tcloaded",!0)),jQuery(jQuery(this)[0].contentWindow).unload(function(){t.checkCompletion(i,"Authorization=LearnDashIdstateId=")})})})},this.newWindowReady=function(){var i=function(o){if(!t.bound)return o.document.getElementsByTagName("meta")&&o.document.URL&&o.document.URL.indexOf("uncanny-snc")!=-1?void e.checkStatues(o,"blank"):void setTimeout(function(){i(o)},500)};jQuery(".AnC-Link").click(function(e){if("_blank"==jQuery(this).attr("target")){e.preventDefault();var o=jQuery(this).attr("href");window.popup&&window.popup.close(),window.popup=open(o,"AnC"),jQuery(window.popup.document).ready(function(){t.bound=!1,setTimeout(function(){i(window.popup)},5e3)}),window.onbeforeunload=function(t){window.popup&&window.popup.close()},(window.navigator.userAgent.indexOf("Edge")>=0||window.navigator.userAgent.indexOf("MSIE")>=0||window.navigator.userAgent.indexOf("Trident")>=0)&&setTimeout(function(){window.popup.onbeforeunload=function(){location.reload()}},1500)}})},this.replaceRequest=function(e,i,o){e.XMLHttpRequest.prototype.oldSend=e.XMLHttpRequest.prototype.send;var n=function(e){this.oldSend(e);try{t.checkCompletion(i,e)}catch(o){}};e.XMLHttpRequest.prototype.send=n},this.checkCompletion=function(i,o){var n=e.getContentType(i),l=!0,a=/\/uncanny-snc\/([0-9]+)\//,s=a.exec(i),r=parseInt(s[1]);if(o.indexOf("Authorization=LearnDashId")>=-1&&o.indexOf("stateId=")>=-1)l=!1;else{var d=JSON.parse(o);"object"==typeof d&&(l=!1)}if(t.completion[n][r]&&(l=!0),!l){var c={action:"Check "+n+" Completion",URL:i,course_id:this.markCompleteCourse,lesson_id:this.markCompleteLesson,setting_option:this.markCompleteSettings,lesson_link:this.currentLessonLink,contentType:n};jQuery.post(wp_ajax_url,c,function(e){e&&("autoadvance"===t.markCompleteSettings&&(e=JSON.parse(e),window.location.href=e.redirect_to),t.markComplete(n,i))})}},this.markComplete=function(e,i){var o=/uncanny-snc\/([0-9]+)\//i,n=o.exec(i);n[1]&&(this.completion[e][n[1]]=!0,this.setButton(!0),t.markCompleted(e))},this.markCompleted=function(t){if("remove"===this.markCompleteSettings||"autoadvance"===this.markCompleteSettings){var e={action:"uncanny-snc-mark-completed",course_id:this.markCompleteCourse,lesson_id:this.markCompleteLesson,setting_option:this.markCompleteSettings,lesson_link:this.currentLessonLink,contentType:t};jQuery.post(wp_ajax_url,e,function(t){t&&"undefined"!=typeof t.redirect_to&&(window.location.href=t.redirect_to)},"json")}}},tincannyModuleFunctions=function(moduleController){var $this=this,captivateFunctions=new tincannyCaptivateFunctions,storylineFunctions=new tincannyStorylineFunctions(moduleController);this.checkStatues=function(t,e){var i=t.document.URL,o=this.getContentType(i);return"Captivate"===o?void this.processCaptivate(t,i,e):"iSpring"===o?void moduleController.replaceRequest(t,i,"iSpring"):"ArticulateRise"===o?void moduleController.replaceRequest(t,i,"ArticulateRise"):"Presenter360"===o?void moduleController.replaceRequest(t,i,"Presenter360"):"Lectora"===o?void moduleController.replaceRequest(t,i,"Lectora"):void(t.OnSendComplete?t.OnSendComplete=function(e){storylineFunctions.OnSendComplete(t,e)}:moduleController.replaceRequest(t,i,"Storyline"))},this.getContentType=function(t){return t.indexOf("Captivate")>=0?"Captivate":t.indexOf("/res/")>=0?"iSpring":t.indexOf("ArticulateRise")>=0?"ArticulateRise":t.indexOf("ArticulateRise2017")>=0||t.indexOf("AR2017")>=0?"ArticulateRise2017":t.indexOf("Presenter360")>=0?"Presenter360":t.indexOf("Lectora")>=0?"Lectora":"Storyline"},this.processCaptivate=function(t,e,i){var o;e.indexOf("multiscreen.html")>=0?(o=jQuery(t.document)[0].getElementsByTagName("frame")[0],o.contentWindow.DoCPExit&&(moduleController.replaceRequest(o.contentWindow,e,"Captivate"),o.contentWindow.DoCPExit=function(){captivateFunctions.DoCPExit(window,i)}),jQuery(o).on("load ready",function(){moduleController.replaceRequest(jQuery(this)[0].contentWindow,e,"Captivate"),jQuery(this)[0].contentWindow.DoCPExit=function(){captivateFunctions.DoCPExit(window,i)}})):e.indexOf("index_TINCAN.html")>=0?(moduleController.replaceRequest(t,e,"Captivate"),t.initializeCP=function(){captivateFunctions.initializeCP(window,t)}):(o=jQuery(t),jQuery(o).ready(function(){moduleController.replaceRequest(t,e,"Captivate"),t.DoCPExit=function(){captivateFunctions.DoCPExit(window,i)}}))},this.checkH5PCompletiton=function(){!moduleController||!moduleController.count||moduleController.count.H5P<=0||jQuery(document).ajaxComplete(function(event,xhr,settings){if(settings.url===WP_H5P_XAPI_STATEMENT_URL){var verb=settings.data.match(/http%3A%2F%2Fadlnet.gov%2Fexpapi%2Fverbs%2F([a-z]+)/);eval(unescape(settings.data));var id=statement.object.definition.extensions["http://h5p.org/x-api/h5p-local-content-id"];if(!moduleController.hasCompletionSetting)return moduleController.completion.H5P[id]=!0,moduleController.setButton(!0),void moduleController.markCompleted("H5P");"true"==xhr.responseJSON.message&&(moduleController.completion.H5P[id]=!0,moduleController.setButton(!0),moduleController.markCompleted("H5P"))}})}},tincannyCaptivateFunctions=function(){var t=this;this.initializeCP=function(e,i){i.initialized||(i.initCalled=!0,i.cp&&i.cp.pg&&i.deviceReady===!1||(i.cpInit=function(){i.document.body.innerHTML=" <div class='cpMainContainer' id='cpDocument' style='left: 0px; top:0px;' >\t<div id='main_container' style='top:0px;position:absolute;width:100%;height:100%;'>\t<div id='projectBorder' style='top:0px;left:0px;width:100%;height:100%;position:absolute;display:block'></div>\t<div class='shadow' id='project_container' style='left: 0px; top:0px;width:100%;height:100%;position:absolute;overflow:hidden;' >\t<div id='project' class='cp-movie' style='width:100% ;height:100%;overflow:hidden;'>\t\t<div id='project_main' class='cp-timeline cp-main'>\t\t\t<div id='div_Slide' onclick='cp.handleClick(event)' style='top:0px; width:100% ;height:100% ;position:absolute;-webkit-tap-highlight-color: rgba(0,0,0,0);'></div>\t\t\t<canvas id='slide_transition_canvas'></canvas>\t\t</div>\t\t<div id='autoplayDiv' style='display:block;text-align:center;position:absolute;left:0px;top:0px;'>\t\t\t<img id='autoplayImage' src='' style='position:absolute;display:block;vertical-align:middle;'/>\t\t\t<div id='playImage' tabindex='9999' role='button' aria-label='play' onkeydown='cp.CPPlayButtonHandle(event)' onClick='cp.movie.play()' style='position:absolute;display:block;vertical-align:middle;'></div>\t\t</div>\t</div>\t<div id='toc' style='left:0px;position:absolute;-webkit-tap-highlight-color: rgba(0,0,0,0);'>\t</div>\t<div id='playbar' style='bottom:0px; position:fixed'>\t</div>\t<div id='cc' style='left:0px; position:fixed;visibility:hidden;pointer-events:none;' onclick='cp.handleCCClick(event)'>\t\t<div id='ccText' style='left:0px;float:left;position:absolute;width:100%;height:100%;'>\t\t<p style='margin-left:8px;margin-right:8px;margin-top:2px;'>\t\t</p>\t\t</div>\t\t<div id='ccClose' style='background-image:url(./assets/htmlimages/ccClose.png);right:10px; position:absolute;cursor:pointer;width:13px;height:11px;' onclick='cp.showHideCC()'>\t\t</div>\t</div>\t<div id='gestureIcon' class='gestureIcon'>\t</div>\t<div id='gestureHint' class='gestureHintDiv'>\t\t<div id='gImage' class='gesturesHint'></div>\t</div>\t<div id='pwdv' style='display:block;text-align:center;position:absolute;width:100%;height:100%;left:0px;top:0px'></div>\t<div id='exdv' style='display:block;text-align:center;position:absolute;width:100%;height:100%;left:0px;top:0px'></div>\t</div>\t</div></div><div id='blockUserInteraction' class='blocker' style='width:100%;height:100%;'>\t<table style='width:100%;height:100%;text-align:center;vertical-align:middle' id='loading' class='loadingBackground'>\t\t<tr style='width:100%;height:100%;text-align:center;vertical-align:middle'>\t\t\t<td style='width:100%;height:100%;text-align:center;vertical-align:middle'>\t\t\t\t<image id='preloaderImage'></image>\t\t\t\t<div id='loadingString' class='loadingString'>Loading...</div>\t\t\t</td>\t\t</tr>\t</table></div> <div id='initialLoading'></div>",i.cp.DoCPInit(),i.lCpExit=i.DoCPExit,targetWinDoCPExit=function(){if("iFrame"!=openMethod){if("lightbox"==openMethod)return void t.closeOverlay(e);i.cp.UnloadActivties&&i.cp.UnloadActivties(),i.lCpExit()}}},i.cpInit(),i.initialized=!0))},this.DoCPExit=function(e,i){if("iFrame"!=i){var o;e!=e.parent&&e.parent&&void 0!==e.parent.DoCPExit?e.parent.DoCPExit():e.top==self?(o=e.open("","_self"),t.closeWindow(o,i)):(o=e.top.open("","_self"),t.closeWindow(o.top,i))}},this.closeWindow=function(e,i){return"lightbox"==i?void t.closeOverlay(e):void(window.popup?window.popup.close():e.close())},this.closeOverlay=function(t){for(var e=t.document.getElementsByClassName("nivo-lightbox-overlay");e.length>0;)e[0].parentNode.removeChild(e[0])}},tincannyStorylineFunctions=function(t){this.OnSendComplete=function(e,i){if(i.MessageType==e.TYPE_RESUME_RESTORE&&e.GetPlayer().SetTinCanResume(i.responseText),e.g_bWaitingTinCanResponse=!1,e.g_oCurrentRequest=null,e.g_arrTinCanMsgQueue.length>0&&!e.g_bStopPosting){e.SendRequest(e.g_arrTinCanMsgQueue.shift())}t.checkCompletion(jQuery(e.document).context.URL,i.responseText)}},moduleController=new tincannyModuleController;
//# sourceMappingURL=modules.min.js.map
