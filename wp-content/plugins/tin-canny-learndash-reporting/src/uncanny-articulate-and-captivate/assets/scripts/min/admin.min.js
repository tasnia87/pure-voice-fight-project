"use strict";function deleteSncFromTableContent(t,e){if(confirm("Do you really want to delete this?")){var i={action:"SnC_Content_Delete",item_id:t,mode:e,security:jQuery('#snc-content_library_wrap input[name="security"]').val()};jQuery.post(ajaxurl,i,function(){"media library"===e||"vc"===e?jQuery('#snc-content_library_wrap table tr[data-item_id="'+t+'"]').remove():location.reload()})}}function deleteSncFromTable(t,e){if(confirm("Do you really want to delete this?")){var i={action:"SnC_Media_Delete",item_id:t,mode:e,security:jQuery('form.snc-media_enbed_form input[name="security"]').val()};jQuery.post(ajaxurl,i,function(){"media library"===e||"vc"===e?jQuery('#snc-content_library_wrap table tr[data-item_id="'+t+'"]').remove():location.reload()})}}function triggerUploadForm(t,e){function i(t){var e=w.width(),i=t<10?e/100*10:e/100*t;v.width(i),v.html(t+"%")}function a(){g=!1,f.width(h.width()),f.show(),b.hide()}function n(){g=!0,f.hide(),b.show()}function o(){i(0)}function r(t){y.attr("class","error"),y.show(),y.html("<p>"+t+"</p>")}function l(t){y.attr("class","updated"),y.show(),y.html("<p>"+t+"</p>")}function c(){y.hide()}function s(){h.ajaxForm({beforeSubmit:function(){o()},uploadProgress:function(t,e,a,n){i(n)},success:function(t){var e=JSON.parse(t);"error"===e.id?r(e.message):"not_supported"===e.id?u(e):d(e),n()}})}function d(i){l(i.message),t("#snc-media_upload_file_wrap").hide(),t("#snc-media_upload_file_wrap #no_tab").length>0&&(t("#snc-media_upload_file_wrap #no_refresh").length>0?self.parent.tb_remove():window.parent.location=window.parent.location.href),e?(t("#vc_properties-panel .vc-snc-trigger input").attr("value",i.id),t("#vc_properties-panel .vc-snc-name input").attr("value",i.title),trigger_vc_snc_mode()):(t(".snc-embed_information").show(),t("a.delete-media").attr("data-item_id",i.id),t("input#item_id").attr("value",i.id),t("input#item_title").attr("value",i.title))}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="";return Object.keys(t).map(function(a){return"object"===_typeof(t[a])?(i+='<li class="structure-dir-btn" data-path="'+e+"/"+a+'">'+a+"</li>",i+='<ul class="structure-dir-container" data-path="'+e+"/"+a+'">',i+=_(t[a],e+"/"+a),i+="</ul>"):i+='<li class="file-selector" data-path="'+e+"/"+t[a]+'">'+t[a]+"<li>",!0}),i}function u(e){y.attr("class","uo-tclr-admin-upload-outside-container"),y.show();var i='<div class="uo-tclr-admin"><div class="uo-tclr-bubble uo-tclr-bubble--upload"><div class="uo-tclr-warning uo-tclr-warning--with-icon">Unsupported file type detected.</div><div class="uo-tclr-bubble__content"><p>Please note that any xAPI/SCORM statements sent by this module:</p><ul><li>will not be recorded</li><li>may display errors because the module cannot communicate with an LMS or LRS</li></ul><p>To use this module anyway, select the .html file that launches the module using the file browser below:</p></div><div class="uo-tclr-file-manager">';i+='<ul class="file-selector">',i+=_(JSON.parse(e.structure)),i+="</ul>",i+="</div>",i+='<button class="uo-tclr-btn-media uo-tclr-btn-media--cancel-upload">Cancel and Delete Upload</button>',i+="</div></div>",y.html(i),t(".uo-tclr-btn-media--cancel-upload").click(function(){location.reload()}),t(".structure-dir-btn").click(function(e){t(e.currentTarget).toggleClass("open");var i=t(e.currentTarget).attr("data-path");t('.structure-dir-container[data-path="'+i+'"]').show()}),t(".file-selector").click(function(i){var a=t(i.currentTarget).attr("data-path");if(a){"/"===a.charAt(0)&&(a=a.slice(1));var o={action:"SnC_Link_File_Path",security:e.nonce,filePath:a,title:e.title};jQuery.post(e.ajaxPath,o,function(t){var e=JSON.parse(t);d(e),n()})}})}function m(t){var e=t.split(".");return e.pop()}function p(t,e){for(var i=!1,a=0;a<e.length;a+=1)if(e[a]===t)return i=!0;return i}var h=t("#snc-media_upload_file_form"),b=t("#snc-upload_button"),f=t("#snc-media_upload_file_wrap .progress"),w=t("#snc-progress_bar_wrapper"),v=t("#snc-progress_bar"),y=t("#snc-media_upload_message"),g=!0;t(".file_upload_button").click(function(e){e.preventDefault();var i=t(this).attr("data-id");c(),g&&t('input[type="file"][data-id="'+i+'"]').click()}),t("#snc-media_upload_file").change(function(){a();var e=this.files[0],i=m(e.name).trim().toLowerCase();return p(i,["zip"])?e.size>t("#snc-max_file_size").val()?(r("File is too large to upload."),void n()):(t("#snc-extension").val(i),void h.submit()):(r("Only .zip Files are Allowed."),void n())}),s()}jQuery(document).ready(function(t){var e="#snc-content_library_wrap table";t(e+" a.content_title, "+e+" a.show").click(function(e){e.preventDefault();var i=t(this).attr("data-item_id");t(".embed_information").each(function(){var e=t(this).attr("data-item_id");i!==e?t(this).hide():t(this).toggle()})})}),jQuery(document).ready(function(t){t("#snc-content_library_wrap table a.delete").click(function(e){e.preventDefault();var i=t("#snc-content_library_wrap").length?"media library":"upload form",a=t(this).attr("data-item_id");deleteSncFromTableContent(a,i)});var e="";t("#snc-content_library_wrap table a.snc_replace_confirm").click(function(e){e.preventDefault();var i=t(this).data("item_id");t("#snc-delete-book-only").data("item_id",i),t("#snc-delete-all-data").data("item_id",i),t("#replace_placeholder").attr("href","media-upload.php?content_id="+i+"&type=snc&tab=upload&min-height=400&no_tab=1&TB_iframe=true").attr("data-item_id",i)}),t(".tclr-replace-content__task-btn").on("click",function(){var e=t(this),i=e.data("task");t(".tclr-replace-content__step-1").hide(),t(".tclr-replace-content__step-2").show(),t("#bookmark-confirmation, #all-confirmation").hide(),"remove-bookmark"===i?t("#bookmark-confirmation").show():"remove-all-data"===i&&t("#all-confirmation").show()}),t(".tclr-replace-content__cancel-2-step-btn").on("click",function(){t("#bookmark-confirmation, #all-confirmation").hide(),t(".tclr-replace-content__step-1").show(),t(".tclr-replace-content__step-2").hide()}),t("#snc-delete-book-only").click(function(){var i=t(this);e=t(this).data("item_id"),i.addClass("tclr-btn--loading");var a=t("#snc-content_library_wrap").length?"media library":"upload form",n={action:"SnC_Content_Bookmark_Delete",item_id:e,mode:a,security:t('#snc-content_library_wrap input[name="security"]').val()};t.post(ajaxurl,n).done(function(){i.removeClass("tclr-btn--loading"),t(".tclr-replace-content__step-1").show(),t(".tclr-replace-content__step-2").hide(),t("#TB_closeWindowButton").trigger("click"),setTimeout(function(){t("#replace_placeholder").trigger("click")},1e3)})}),t("#snc-delete-all-data").click(function(){var i=t(this);e=t(this).data("item_id"),i.addClass("tclr-btn--loading");var a=t("#snc-content_library_wrap").length?"media library":"upload form",n={action:"SnC_Content_Delete_All",item_id:e,mode:a,security:t('#snc-content_library_wrap input[name="security"]').val()};t.post(ajaxurl,n).done(function(){i.removeClass("tclr-btn--loading"),t(".tclr-replace-content__step-1").show(),t(".tclr-replace-content__step-2").hide(),t("#TB_closeWindowButton").trigger("click"),setTimeout(function(){t("#replace_placeholder").trigger("click")},1e3)})});var i={init:function(){this.getElements(),this.getData(),this.initFuse(),this.listenSearchField()},getElements:function(){this.$elements={searchField:t("#tclr-classic-editor-content-library-search"),tableContainer:t(".tclr-classic-editor-content-library__list"),tableItems:t(".tclr-classic-editor-content-library__list tbody tr.tclr-classic-editor-content-library__item")}},getData:function(){var e=[];t.each(this.$elements.tableItems,function(i,a){var n=t(a),o={title:n.data("item_name"),$element:n};e.push(o)}),this.items=e},initFuse:function(){this.Fuse=new Fuse(this.items,{keys:["title"],threshold:0,ignoreLocation:!0})},listenSearchField:function(){var t=this;this.$elements.searchField.on("input",function(){var e=t.$elements.searchField.val();""!==e?t.search(e):t.showAll()})},search:function(t){var e=this.Fuse.search(t);this.$elements.tableContainer.addClass("tclr-classic-editor-content-library__list--search-mode"),this.$elements.tableItems.removeClass("tclr-classic-editor-content-library__item--visible"),e.length>0?(this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--no-results"),e.forEach(function(t){t.item.$element.addClass("tclr-classic-editor-content-library__item--visible")})):this.$elements.tableContainer.addClass("tclr-classic-editor-content-library__list--no-results")},showAll:function(){this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--search-mode"),this.$elements.tableItems.removeClass("tclr-classic-editor-content-library__item--visible"),this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--no-results")}};i.init()}),jQuery(document).ready(function(t){t('.insert_type input[type="radio"]').click(function(){var e=t(this).attr("data-item_id");t('form[data-item_id="'+e+'"] .options').stop().slideUp(),t('form[data-item_id="'+e+'"] .options[data-item_option="'+t(this).val()+'"]').stop().slideDown()}),t('.lightbox_title input[type="radio"]').click(function(){var e=t(this).attr("data-item_id"),i=t(this).val();t('input.text_with_title[data-item_id="'+e+'"]').hide(),"With Title"===i&&t('input.text_with_title[data-item_id="'+e+'"]').show().focus()}),t('.lightbox_button input[type="radio"]').click(function(){var e=t(this).attr("data-item_id"),i=t(this).val();t('input.lightbox_button_text[data-item_id="'+e+'"]').hide(),t('div.lightbox_button_text[data-item_id="'+e+'"]').hide(),t('section.lightbox_button_custom[data-item_id="'+e+'"]').hide(),t('input.lightbox_button_url[data-item_id="'+e+'"]').hide(),"text"!==i&&"small"!==i&&"medium"!==i&&"large"!==i||(t('input.lightbox_button_text[data-item_id="'+e+'"]').show(),t('div.lightbox_button_text[data-item_id="'+e+'"]').show()),"url"===i&&t('input.lightbox_button_url[data-item_id="'+e+'"]').show(),"image"===i&&t('.lightbox_button_custom[data-item_id="'+e+'"]').show()}),t('.new_window_option input[type="radio"]').click(function(){var e=t(this).attr("data-item_id"),i=t(this).val();t('.new_window_option[data-item_id="'+e+'"] input[type="text"]').hide(),t('div._blank_button_text[data-item_id="'+e+'"]').hide(),t('.new_window_option[data-item_id="'+e+'"] .file_upload_button').hide(),"text"!==i&&"small"!==i&&"medium"!==i&&"large"!==i||(t('.new_window_option[data-item_id="'+e+'"] input._blank_text').show(),t('div._blank_button_text[data-item_id="'+e+'"]').show()),"image"===i&&t('.new_window_option[data-item_id="'+e+'"] .file_upload_button').show(),"url"===i&&t('.new_window_option[data-item_id="'+e+'"] input._blank_url').show()}),t('.same_window_option input[type="radio"]').click(function(){var e=t(this).attr("data-item_id"),i=t(this).val();t('.same_window_option[data-item_id="'+e+'"] input[type="text"]').hide(),t('div._self_button_text[data-item_id="'+e+'"]').hide(),t('.same_window_option[data-item_id="'+e+'"] .file_upload_button').hide(),"text"!==i&&"small"!==i&&"medium"!==i&&"large"!==i||(t('.same_window_option[data-item_id="'+e+'"] input._self_text').show(),t('div._self_button_text[data-item_id="'+e+'"]').show()),"image"===i&&t('.same_window_option[data-item_id="'+e+'"] .file_upload_button').show(),"url"===i&&t('.same_window_option[data-item_id="'+e+'"] input._self_url').show()}),t("form.snc-media_enbed_form .delete-media, #snc-content_library_wrap table span a.delete").click(function(e){e.preventDefault();var i=t("#snc-content_library_wrap").length?"media library":"upload form",a=t(this).attr("data-item_id");deleteSncFromTable(a,i)})}),jQuery(document).ready(function(t){var e=t(".snc-media_enbed_form");e.ajaxForm({success:function(t){var e=JSON.parse(t),i=window.dialogArguments||opener||parent||top;i.send_to_editor(e.shortcode)}})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};jQuery(document).ready(function(t){triggerUploadForm(t)});
//# sourceMappingURL=admin.min.js.map
